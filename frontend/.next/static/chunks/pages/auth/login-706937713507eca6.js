(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(7923)}])},7530:function(t,e){"use strict";e.Z={LOGIN:"/api/v1/auth/login",REGISTER:"/api/v1/auth/register",CANDIDATE:"/api/v1/user/jobs",RECRUITER:"/api/v1/recruiter/jobs"}},7923:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return m}});var r=s(5893),i=s(7294),n=s(5945),o=s(8228),a=s(1163),u=s(3e3),l=s(7530);let c=(t,e)=>{let s=(0,a.useRouter)();(0,n.NL)();let r=(0,o.D)(async()=>{let s=await u.b.post(l.Z.LOGIN,{email:t,password:e});console.log(s);let r=s.data.accessToken,i=s.data.role;return localStorage.setItem("token",r),{token:r,role:i}},{onSuccess:t=>{let{role:e}=t;"candidate"===e?s.push("/candidate/candidatePage"):"admin"===e?s.push("/admin"):"recruiter"===e&&s.push("/recruiter/recruiter")}}),i=t=>{t.preventDefault(),r.mutate()};return{handleSubmit:i}};var d=s(2920);function h(){let[t,e]=(0,i.useState)(""),[s,n]=(0,i.useState)(""),o=(0,a.useRouter)(),{handleSubmit:u}=c(t,s),l=()=>{o.push("/auth/register")};return(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",style:{backgroundImage:"linear-gradient(0deg,#EDF6FF  60%,#303F60 60%)"},children:(0,r.jsxs)("form",{onSubmit:u,className:"bg-white p-6 rounded-lg shadow-md",style:{position:"absolute",top:"160px",left:"442px",width:"557px",height:"427px",borderRadius:"20px",boxShadow:"0px 30px 36px #557DA526",opacity:1},children:[(0,r.jsx)("h1",{className:"block text-gray-700 font-bold text-3xl mb-2",children:"Login"}),(0,r.jsx)("h1",{className:"text-2xl font-medium mb-6",children:"Log in"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"email",className:"bg-white text-gray-800 px-2 py-1 rounded-md",children:"Email"}),(0,r.jsx)("input",{type:"text",id:"email",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter your email",value:t,onChange:t=>e(t.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"password",className:"bg-white text-gray-800 px-2 py-1 rounded-md",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter your password",value:s,onChange:t=>n(t.target.value),required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"w-600 h-19 py-2 px-4 rounded-md bg-blue-600 text-white font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",style:{position:"relative",left:"180px",width:"148px",font:"normal normal medium 16px/19px Helvetica Neue",color:"#FFFFFF",opacity:1},children:"Log In"}),(0,r.jsx)(d.Ix,{}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("p",{className:"text-gray-700 text-center",children:["Don't have an account?"," ",(0,r.jsx)("a",{className:"text-blue-600 hover:text-blue-800 hover:cursor-pointer",onClick:l,children:"Register"})]})})]})})}s(1399);let p=()=>(0,r.jsx)(h,{});var m=p},3e3:function(t,e,s){"use strict";s.d(e,{b:function(){return o}});var r=s(6154),i=s(2920),n={LOGIN:"/auth/login",REGISTER:"/auth/register",RECRUITER:"/recruiter/recruiter"};let o=r.Z.create({baseURL:"http://localhost:5005",timeout:3e4});o.interceptors.request.use(t=>{let e=window.localStorage.getItem("accessToken"),s=window.localStorage.getItem("signature"),r=new URLSearchParams(window.location.search);return t.headers["x-device-client"]="agent-partner-panel",t.headers["x-platform-app"]="web",(e||r.get("auth"))&&(t.headers.Authorization=r.get("auth")?"Bearer ".concat(r.get("auth")):"Bearer ".concat(e)),s&&(t.headers["x-device-hash"]=s),t}),o.interceptors.response.use(t=>t,t=>{var e,s,r,o,a,u,l,c;let d=window.location.pathname.includes(n.LOGIN),h=window.location.pathname.includes(n.REGISTER),p=window.location.pathname.includes(n.RECRUITER);if(h&&(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)===422)throw i.Am.error("some entities have failed the check"),t;if(d){if(d&&(null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.status)===404)throw i.Am.error("Invalid credentials"),t}else console.log("not login page"),(null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status)===401||(null==t?void 0:null===(o=t.response)||void 0===o?void 0:o.status)===402||(null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.status)===500?(i.Am.error("Unauthorized Access"),console.log("enter"),window.localStorage.removeItem("accessToken"),window.location.replace(n.LOGIN)):p&&(null==t?void 0:null===(u=t.response)||void 0===u?void 0:u.status)===404?(console.log("recruiter"),i.Am.error("No applicants for this position")):((null==t?void 0:null===(l=t.response)||void 0===l?void 0:l.status)===404||(null==t?void 0:null===(c=t.response)||void 0===c?void 0:c.status)===422)&&(console.log("error received"),i.Am.error("Invalid inputs given"))})},1399:function(){},1163:function(t,e,s){t.exports=s(6885)},8228:function(t,e,s){"use strict";s.d(e,{D:function(){return h}});var r=s(7294),i=s(464),n=s(2161),o=s(9886),a=s(81),u=s(3989);class l extends u.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let s=this.options;this.options=this.client.defaultMutationOptions(t),(0,n.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.listeners.length){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,o.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,s,r,i,n,o,a,u;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(n=(o=this.mutateOptions).onError)||n.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(u=this.mutateOptions).onSettled)||a.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(t=>{t(this.currentResult)})})}}var c=s(5945),d=s(4798);function h(t,e,s){let o=(0,n.lV)(t,e,s),u=(0,c.NL)({context:o.context}),[h]=r.useState(()=>new l(u,o));r.useEffect(()=>{h.setOptions(o)},[h,o]);let m=(0,i.$)(r.useCallback(t=>h.subscribe(a.V.batchCalls(t)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),v=r.useCallback((t,e)=>{h.mutate(t,e).catch(p)},[h]);if(m.error&&(0,d.L)(h.options.useErrorBoundary,[m.error]))throw m.error;return{...m,mutate:v,mutateAsync:m.mutate}}function p(){}}},function(t){t.O(0,[222,774,888,179],function(){return t(t.s=163)}),_N_E=t.O()}]);