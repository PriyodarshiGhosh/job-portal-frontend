(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{7530:function(e,t){"use strict";t.Z={LOGIN:"/api/v1/auth/login",REGISTER:"/api/v1/auth/register",CANDIDATE:"/api/v1/user/jobs",RECRUITER:"/api/v1/recruiter/jobs"}},8275:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var a=o(5893),l=o(7294),n=o(8228),s=o(7530),r=o(3e3);let i=(e,t,o,a,i,c)=>{let[d,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(null),{mutateAsync:b}=(0,n.D)(async o=>{u(!0),p(null);try{let a=await r.b.get(s.Z.CANDIDATE+"/?search=".concat(e,"&currentPage=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});return a.data}catch(e){throw Error("Error fetching jobs")}finally{u(!1)}}),g=e=>{c.push("http://localhost:3000/candidate/applyJob?jobId=".concat(e))},x=async()=>{if(t>1){let a=localStorage.getItem("token")||"";try{let l=t-1,n=await r.b.get(s.Z.CANDIDATE+"/?search=".concat(e,"&currentPage=").concat(l),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});i(n.data),o(l)}catch(e){}}},m=async()=>{if(t<a.pagination.totalPages){let a=localStorage.getItem("token")||"";try{let l=t+1,n=await r.b.get(s.Z.CANDIDATE+"/?search=".concat(e,"&currentPage=").concat(l),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});i(n.data),o(l)}catch(e){}}},f=async e=>{e.preventDefault();let t=localStorage.getItem("token")||"";try{let e=await b(t);console.log(e),i(e),o(1)}catch(e){alert("Error fetching jobs")}};return(0,l.useEffect)(()=>{},[a]),{handleSubmit:f,handleApply:g,handlePreviousPage:x,handleNextPage:m}};var c=o(1163),d=o(3253),u=o.n(d);let h=(e,t)=>{let{mutateAsync:o}=(0,n.D)(async o=>{try{let a=await r.b.post(s.Z.CANDIDATE,{resume:e,jobId:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});return a.data}catch(e){throw Error("Error submitting job application")}}),a=async e=>{e.preventDefault();let t=localStorage.getItem("token")||"";console.log(t);try{await o(t),alert("Job application submitted successfully!")}catch(e){alert(e.message)}};return{handleSubmit:a}};var p=o(5434);function b(e){let{jobId:t,closeModal:o}=e,[n,s]=(0,l.useState)(""),[r,i]=(0,l.useState)(""),d=(0,c.useRouter)();(0,l.useEffect)(()=>{let{query:e}=d,t=e.jobId;t&&i(t)},[d.query]);let{handleSubmit:u}=h(n,t);return(0,a.jsx)("div",{className:"min-h-screen py-8",style:{backgroundImage:"linear-gradient(0deg, #EDF6FF 60%, #303F60 60%)"},children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mt-8",children:"Apply for a Job"}),(0,a.jsxs)("form",{onSubmit:u,className:"bg-white p-6 rounded-lg shadow-md",style:{position:"absolute",top:"160px",left:"442px",width:"557px",height:"427px",borderRadius:"20px",boxShadow:"0px 30px 36px #557DA526",opacity:1},children:[(0,a.jsx)("button",{onClick:o,className:"close-icon",children:(0,a.jsx)(p.FU5,{})}),(0,a.jsx)("h2",{children:(0,a.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Submit your resume for the given job"})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"resume",children:"Resume"}),(0,a.jsx)("textarea",{className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"resume",placeholder:"Enter your resume here",value:n,onChange:e=>s(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Submit"})]})]})})}function g(){let[e,t]=(0,l.useState)(""),[o,n]=(0,l.useState)(null),[s,r]=(0,l.useState)(1),[d,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),x=(0,c.useRouter)(),{handleSubmit:m,handleApply:f,handlePreviousPage:v,handleNextPage:y}=i(e,s,r,o,n,x),j=()=>{h(!1),g("")},w=e=>{g(e),h(!0)};return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mt-8",children:"Search for a Job"}),(0,a.jsxs)("form",{onSubmit:m,className:"mt-8",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"role",children:"Job Role"}),(0,a.jsx)("input",{className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"role",type:"text",placeholder:"Enter the job role",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Submit"})]}),o&&o.data.length>0&&(0,a.jsx)("div",{className:"mt-8 grid grid-cols-2 gap-2",children:o.data.map(e=>(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 flex flex-col justify-between",style:{height:"250px",width:"280px",marginRight:"20px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:"Title:"}),(0,a.jsxs)("p",{className:"text-gray-800 font-bold",children:[" ",e.title]}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:"Description:"}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:e.description}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:"Location:"}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:e.location}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:"Salary:"}),(0,a.jsx)("p",{className:"text-gray-800 font-bold",children:e.salary})]}),(0,a.jsx)("button",{type:"button",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:()=>w(e.id),children:"Apply"})]},e.id))}),(0,a.jsx)(u(),{isOpen:d,onRequestClose:j,className:"modal",overlayClassName:"modal-overlay",children:(0,a.jsx)(b,{jobId:p,closeModal:j})}),o&&o.pagination&&(0,a.jsxs)("div",{className:"flex justify-center mt-4",children:[(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:v,disabled:1===s,style:{marginRight:"5px",width:"70px"},children:"Back"}),(0,a.jsxs)("p",{className:"text-gray-800 font-bold",children:["Page ",s," of ",o.pagination.totalPages]}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",onClick:y,disabled:s===o.pagination.totalPages,children:"Next"})]})]})}let x=()=>(u().setAppElement("#__next"),(0,a.jsx)(g,{}));var m=x},3e3:function(e,t,o){"use strict";o.d(t,{b:function(){return s}});var a=o(6154),l=o(2920),n={LOGIN:"/auth/login",REGISTER:"/auth/register",RECRUITER:"/recruiter/recruiter"};let s=a.Z.create({baseURL:"http://localhost:5005",timeout:3e4});s.interceptors.request.use(e=>{let t=window.localStorage.getItem("accessToken"),o=window.localStorage.getItem("signature"),a=new URLSearchParams(window.location.search);return e.headers["x-device-client"]="agent-partner-panel",e.headers["x-platform-app"]="web",(t||a.get("auth"))&&(e.headers.Authorization=a.get("auth")?"Bearer ".concat(a.get("auth")):"Bearer ".concat(t)),o&&(e.headers["x-device-hash"]=o),e}),s.interceptors.response.use(e=>e,e=>{var t,o,a,s,r,i,c,d;let u=window.location.pathname.includes(n.LOGIN),h=window.location.pathname.includes(n.REGISTER),p=window.location.pathname.includes(n.RECRUITER);if(h&&(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.status)===422)throw l.Am.error("some entities have failed the check"),e;if(u){if(u&&(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===404)throw l.Am.error("Invalid credentials"),e}else console.log("not login page"),(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)===401||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.status)===402||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)===500?(l.Am.error("Unauthorized Access"),console.log("enter"),window.localStorage.removeItem("accessToken"),window.location.replace(n.LOGIN)):p&&(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status)===404?(console.log("recruiter"),l.Am.error("No applicants for this position")):((null==e?void 0:null===(c=e.response)||void 0===c?void 0:c.status)===404||(null==e?void 0:null===(d=e.response)||void 0===d?void 0:d.status)===422)&&(console.log("error received"),l.Am.error("Invalid inputs given"))})},1163:function(e,t,o){e.exports=o(6885)}}]);